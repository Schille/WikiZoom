<html>
	<head>
		<script src="dependencies/raphael-min.js" type="text/javascript"></script>
		<script src="dependencies/mootools-more-1.4.0.1.js" type="text/javascript"></script>
		<script src="dependencies/mootools-core-1.4.5.js" type="text/javascript"></script>
		<script src="ZoomCore.js" type="text/javascript"></script>
		<script src="ZoomUI.js" type="text/javascript"></script>
		<script src="WikiFetcher.js" type="text/javascript"></script>
		<script src="SettingsTest.js" type="text/javascript"></script>
        <meta charset="utf-8">
		<title>Settings</title>
		<link href="dependencies/bootstrap/css/bootstrap.css" rel="stylesheet">
	
    <script type="text/javascript">

        function getCookie(c_name) {
            var c_value = document.cookie;
            var c_start = c_value.indexOf(" " + c_name + "=");
            if (c_start == -1) {
                c_start = c_value.indexOf(c_name + "=");
            }
            if (c_start == -1) {
                c_value = null;
            }
            else {
                c_start = c_value.indexOf("=", c_start) + 1;
                var c_end = c_value.indexOf(";", c_start);
                if (c_end == -1) {
                    c_end = c_value.length;
                }
                c_value = unescape(c_value.substring(c_start, c_end));
            }
            return c_value;
        }

        function setCookie(c_name, value, exdays) {
            var exdate = new Date();
            exdate.setDate(exdate.getDate() + exdays);
            var c_value = escape(value) + ((exdays == null) ? "" : "; expires=" + exdate.toUTCString());
            document.cookie = c_name + "=" + c_value;
        }

        function checkCookie() {
            var username = getCookie("username");
            var level = getCookie("Level");
            var knoten = getCookie("Knoten");
            if (level == null || level == "") {
                setCookie("Level", 3, 365);
            }
            if (knoten == null || knoten == "") {
                setCookie("Knoten", 5, 365);
            }
            if (username != null && username != "") {
                alert("Welcome again " + username + ", Level: " + level + ", Knoten: " + knoten);
            }
            else {
                alert("Welcome to WikiZoom, please feel free to change settings!");
            }
        }

        function writeSettings(value) {
            var writenValue = getCookie(value);
            if (writenValue != null && writenValue != "") {
                document.write(" " + writenValue);
            }
            else {
                document.write("");
            }
        }

        function checkNumber(checkValue) {
            if (isNaN(document.getElementById(checkValue).value)) {
                document.getElementById(checkValue).value = "";
                document.getElementById(checkValue).focus();
                return false;
            }
        }

        function writeSettingsTest(value) {
            var writenValue = getCookie(value);
            document.write(writenValue);
        }

    </script>
    </head>
	<body onload="checkCookie()">

    <div class="span"></div>

			<div class="jumbotron">

				<div class="row-fluid">
					<div id="aotd" class="span6">
						<h2> Settings
						<br>
						</h2>
						<p class="text-left">
                        Hallo<script>writeSettings("username")</script>, 
                            <br>
                        Hier kannst du deine Settings einstellen. 
                            <br>
                        Deine letzten Einstellungen lauten: <br>
                        Knotenanzahl: <script>writeSettings("Knoten")</script><br>
                        Levelanzahl: <script>writeSettings("Level")</script>


						</p>
				</div>
			</div>
    </div>

    Level: <input type="text" name="levelSettings" id="levelSettings" value="" maxlength="5" onkeyup="checkNumber('levelSettings')"/>
        <button type="button" onclick="setCookie('Level', document.getElementById('levelSettings').value, 365)">Level!</button>
        <br>
    Knoten: <input type="text" name="vertexSettings" id="vertexSettings" value="" maxlength="5" onkeyup="checkNumber('vertexSettings')"/>
        <button type="button" onclick="setCookie('Knoten', document.getElementById('vertexSettings').value, 365)">Knoten!</button>
        <br>
    Username: <input type="text" name="nameSettings" id="nameSettings" value="" maxlength="5"/>
        <button type="button" onclick="setCookie('username', document.getElementById('nameSettings').value, 365)">Username!</button>
        <br>

    </body>

</html>
