<!DOCTYPE html>
<html lang="en">

	<head>
		<script src="dependencies/raphael-min.js" type="text/javascript"></script>
		<script src="dependencies/mootools-core-1.4.5.js" type="text/javascript"></script>
		<script src="dependencies/mootools-more-1.4.0.1.js" type="text/javascript"></script>
		<script src="vertex.js" type="text/javascript"></script>
		<script src="ZoomCore.js" type="text/javascript"></script>
		<script src="ZoomUI.js" type="text/javascript"></script>
		<script src="WikiFetcher.js" type="text/javascript"></script>
		<script src="Settings.js"></script>
		<script src="TestsWikiZoom.js" type="text/javascript"></script>
		<script src="Settings.js" type="text/javascript"></script>
		<meta charset="utf-8">
		<title>WikiZoom</title>
		<link href="dependencies/bootstrap/css/bootstrap.css" rel="stylesheet">

	</head>
	<body>
		<script>
			var weekday = new Date().get('day');
			switch(weekday) {
				case 1:
					weekday = "Montag";
					break;

				case 2:
					weekday = "Dienstag";
					break;

				case 3:
					weekday = "Mittwoch";
					break;

				case 4:
					weekday = "Donnerstag";
					break;

				case 5:
					weekday = "Freitag";
					break;

				case 6:
					weekday = "Samstag";
					break;

				case 7:
					weekday = "Sonntag";
					break;

			}

			//$('div.container div.jumbotron div.row-fluid aotd').set('html', updated_aotd.intro);

		</script>
		<!-- Begin navbar (Bottom) -->
		<div class="navbar navbar_hide navbar-fixed-bottom">
			<div class="navbar-inner navbar_hide">
				<div class="container navbar_hide">
					<ul class="nav navbar_hide">
						<li >
							<a href="template1.html">Home</a>
						</li>
						<li>
							<a onclick="toggle_about()">About</a>
						</li>
						<li>
							<a onclick="toggle_help()">Help</a>
						</li>
						<li>
							<a onclick="toggle_settings()">Settings</a>
						</li>
					</ul>
				</div>
			</div>
		</div>
		<!-- Begin help-overlay -->
		<div class="modal help-over overlay_window">
			<div class="help-over overlay_header">
				Hilfefenster
			</div>
			<div class="help-over overlay_body">
				Hier kommt die Hilfe rein!
			</div>
			<div class="help-over overlay_footer">
				<button role="button" onclick="toggle_help()" class="btn btn-primary pull-right">
					Back!
				</button>
			</div>

		</div>
		<div class="modal-backdrop help-over overlay_background"></div>
		<!-- End help-overlay -->

		<!-- Begin about-overlay -->
		<div class="modal about-over overlay_window">
			<div class="about-over overlay_header">
				Aboutfenster
			</div>
			<div class="about-over overlay_body">
				Hier kommt der about Text rein
			</div>
			<div class="about-over overlay_footer">
				<button role="button" onclick="toggle_about()" class="btn btn-primary pull-right">
					Back!
				</button>
			</div>

		</div>
		<div class="modal-backdrop about-over overlay_background"></div>

		<!-- End about-overlay -->

		<!-- Begin settings-overlay -->
		<div class="modal settings-over overlay_window">
			<div class="settings-over overlay_header">
				Settingsfenster
			</div>
			<div class="settings-over overlay_body">
				<script>
					var settings = new Settings();
					window.addEvent('domready', function() {

						settings.init();
					});
				</script>
				Hallo <span id="userName"></span>,
				<p class="text-left">
					Hier kannst du deine Settings einstellen.
					Die Grundeinstellungen (Knoten: 5, Level: 3) ermöglichen das optimale Zoomerlebnis.
					<br>
				</p>
				<label>Speed:</label>
				<div id="slider" class="slider">
					<div class="knubbel"></div>

				</div>
				<div id="speed_value"></div>
				<span class="help-block"> Aktueller Speed: <span id="speed"></span></span>

				<script>
					window.addEvent('domready', function() {

						var slider = $('slider');

						new Slider(slider, slider.getElement('.knubbel'), {
							range : [1, 100],
							initialStep : $('speed').get('html'),
							onChange : function(value) {
								if (value)
									$('speed_value').set('html', value);
							}
						});
					});
				</script>

				<label>Knoten:</label>
				<input type="text" name="vertexSettings" placeholder="" id="vertexSettings" value="" maxlength="5" onkeyup="settings.checkNumber('vertexSettings')"/>
				<span class="help-block"> Aktuelle Knotenanzahl: <span id="nodes"></span></span>

				<label>Level:</label>
				<input type="text" name="levelSettings" id="levelSettings" value="" maxlength="5" onkeyup="settings.checkNumber('levelSettings')"/>
				<span class="help-block">Aktuelle 	Levelanzahl: <span id="level"></span></span>

			</div>

			<div class="settings-over overlay_footer">
				<button type="button" id="changeUN" class="btn pull-left" value="Change Username" onclick="settings.changeUsername()">
					Change Username!
				</button>
				<button id="update" class="btn btn-primary pull-right" value="Update" onclick="settings.updateVars();toggle_settings();">
					Save!
				</button>
				&nbsp;
				<button role="button" onclick="toggle_settings()" class="btn pull-right">
					Back!
				</button>

			</div>

		</div>
		<div class="modal-backdrop settings-over overlay_background"></div>
		<!-- End settings-overlay -->

		<script>
			var help_over = $$("div.help-over");

			var about_over = $$("div.about-over");
			var settings_over = $$("div.settings-over");
			//var navbar = $$("div.navbar_hide");
			help_over.hide();
			about_over.hide();
			settings_over.hide();
			//navbar.toggle();

			function toggle_help() {

				help_over.toggle();
				myHorizontalSlide.toggle();
			}

			function toggle_about() {
				about_over.toggle();
			}

			function toggle_settings() {
				settings_over.toggle();
			}
		</script>

		<div class="container">
			<div class="masthead">
				<h3 class="muted"><a class="brand" href="#">WikiZoom</a></h3>

			</div>
			<!-- Jumbotron -->
			<div>
				<div class="hero-unit">
					<h1 class="text-center"> WikiZoom
					<br>
					</h1>
					<p class="lead text-center">
						&nbsp; Die innovative Art Wissen zu erleben!

					</p>

					<a role="button" onclick="toggle_help()" class="badge pull-left">Help!</a>
				</div>
				<div class="row">
					<div class="span5"></div>

					<div id="alert" class="alert-error span text-center">
						Wort nicht gefunden!
					</div>

				</div>

			</div>
			<div id="raus" class="row">
				<div class="span3"></div>
				<form class="form-search center">
					<div class="input-append center" id="inputApp">
						<input type="text" id="search" autocomplete="off"  class="input-xxlarge c search-query">

						<button type="button"  type="search" onclick="template1_init()" class="btn btn-primary">
							Search
						</button>
					</div>

				</form>
			</div>

			<script type="text/javascript">
				function template1_init() {
					if ($('search').value != '') {

						$$('div').hide();

						//$$('div.navbar_hide').show();
						start($('search').value);
					}

				}
			</script>

			<div id="raus" class="row">
				<div class="span5"></div>
				<div class="span3">
					<ul class="nav nav-list span4" id="selects"></ul>
				</div>
			</div>

			<script type="text/javascript">
				var alert1 = $('alert');
				var selects = $('selects');
				var searchBox = $('search')

				alert1.hide();
				searchBox.addEvents({
					'input' : function(e) {

						var searchKey = $('search');

						//Create API-Request
						var searchRequest = new Request.JSONP({

							url : "http://de.wikipedia.org/w/api.php?action=opensearch&format=json&limit=10&search=" + searchKey.value,

							onComplete : function(data) {
								//Delete container content
								selects.set('html', '');

								for (var counter = 0; counter < 4; counter++) {

									//Check if there is content in the Array
									if (data[1][counter] == undefined || data[1][counter] == null) {
										selects.set('style', 'border-bottom: 2px solid rgba(175,175,175,1)')
										break;
									}
									//Insert
									selects.set('html', selects.get('html') + '<li class="nav-header" ><a id=\'typeahead' + counter + '\'>' + data[1][counter] + '</a></li>');
									//Add bottom border
									selects.set('style', 'border-bottom: 2px solid rgba(175,175,175,1)')

								}

								//EventListener
								if ($('typeahead0') != null) {
									var type0 = $('typeahead0');
									type0.addEvents({
										'click' : function() {
											searchBox.set('value', type0.get('html'));
											selects.set('html', '');
											selects.set('style', 'border-bottom: 2px solid rgba(175,175,175,1)')
										}
									})
								} else
									selects.set('style', 'border-bottom: 2px solid rgba(175,175,175,1)');
								if ($('typeahead1') != null) {
									var type1 = $('typeahead1');
									type1.addEvents({
										'click' : function() {
											searchBox.set('value', type1.get('html'));
											selects.set('html', '');
											selects.set('style', 'border-bottom: 0px')
										}
									})
								} else {
									selects.set('style', 'border-bottom: 2px solid rgba(175,175,175,1)')
								}
								if ($('typeahead2') != null) {
									var type2 = $('typeahead2');
									type2.addEvents({
										'click' : function() {
											searchBox.set('value', type2.get('html'));
											selects.set('html', '');
											selects.set('style', 'border-bottom: 0px')
										}
									})
								} else {
									selects.set('style', 'border-bottom: 0px')
								}
								if ($('typeahead3') != null) {
									var type3 = $('typeahead3');
									type3.addEvents({

										'click' : function() {
											searchBox.set('value', type3.get('html'));
											selects.set('html', '');
											selects.set('style', 'border-bottom: 0px')
										}
									})
								} else {
									selects.set('style', 'border-bottom: 0px')
								}
							}
						});
						searchRequest.send();

					}
				})

			</script>

			<div class="span"></div>

			<div class="jumbotron">

				<div class="row-fluid">

					<div id="aotd" class="span6">
						<h2> Artikel des Tages ...
						<br>
						</h2>
						<p id="aotd_text" class="text-left">

						</p>
						<p>
							<a class="btn" target="_blank" href="http://de.wikipedia.org/">Mehr »</a>
						</p>
					</div>
					
					<script>
					
						var aotdRequest = new Request.JSONP({
						
							url : "http://de.wikipedia.org/w/api.php?action=parse&format=json&prop=text&page=Wikipedia%3AHauptseite%2FArtikel_des_Tages%2F"+weekday,

							onComplete : function(JSONdata) {
								
								$('aotd_text').set('html', JSONdata.parse.text["*"].replace(/Abk(.|\n)+Folgewoche.<\/li>\n<\/ul>\n<\/div>/gi, ''));
								
							}
						}).send();
						

					</script>
					
					<div class="span6">
						<h2> Wusstest du schon ...
						<br>
						</h2>
						<p id="schon_text" class="text-left">
						</p>
						<p>
							<a class="btn" target="_blank" href="http://de.wikipedia.org/">Mehr »</a>
						</p>
						<script>
							
							var searchRequest = new Request.JSONP({

								url : "http://de.wikipedia.org/w/api.php?action=parse&format=json&prop=text&page=Wikipedia%3AHauptseite%2FSchon_gewusst%2F" + weekday,

								onComplete : function(JSONdata) {
									
									$('schon_text').set('html', JSONdata.parse.text["*"].replace(/<div\sclass=(.|\n)+Aktualisierungserinnerungen funktionieren.<\/li>\s<\/ul>\n<\/div>/gi, ''));

								}
							}).send();

						</script>

					</div>
				</div>
			</div>

			<div class="footer">
				<p>
					© WikiZoom 2013
				</p>
			</div>
		</div>

		<div class="span"></div>
		<style>
			.navbar .nav {
				margin: 0;
				display: table;
				width: 100%;
			}
			.navbar .nav li {
				display: table-cell;
				width: 1%;
				float: none;
			}
			.navbar .nav li a {
				font-weight: bold;
				text-align: center;
				border-left: 1px solid rgba(255,255,255,.75);
				border-right: 1px solid rgba(0,0,0,.1);
			}
			.navbar .nav li:first-child a {
				border-left: 0;
				border-radius: 3px 0 0 3px;
			}
			.navbar .nav li:last-child a {
				border-right: 0;
				border-radius: 0 3px 3px 0;
			}
			body {
				padding-top: 20px;
				padding-bottom: 60px;
			}

			.jumbotron {
				margin: 80px 0;
				text-align: center;
			}
			.jumbotron h1 {
				font-size: 100px;
				line-height: 1;
			}
			.jumbotron .lead {
				font-size: 24px;
				line-height: 1.25;
			}
			.jumbotron .btn {
				font-size: 21px;
				padding: 14px 24px;
			}

			.center {

				float: none;
				margin-left: auto;
				margin-right: auto;
			}

			.overlay_window {

				background-color: #FFFFFF;
			}
			.overlay_header {
				position: relative;
				margin-top: 0%;
				height: 30px;
				padding: 10px;
				-webkit-border-radius: 4px;
				-moz-border-radius: 4px;
				border-radius: 5px;
				background-color: #F0F0F0;
			}

			.overlay_body {
				position: relative;
				height: 100%;
				padding: 10px;
				-webkit-border-radius: 4px;
				-moz-border-radius: 4px;
				border-radius: 5px;
				background-color: #FFFFFF;
			}

			.overlay_footer {
				position: relative;
				height: 30px;
				padding: 10px;
				-webkit-border-radius: 4px;
				-moz-border-radius: 4px;
				border-radius: 5px;
				background-color: #F0F0F0;
			}

			#alert {

				-webkit-border-radius: 4px;
				-moz-border-radius: 4px;
				border-radius: 5px;
			}

			#selects {
				position: absolute;
				margin-left: -12%;
				margin-top: -20px;
				border: 2px;
				border-right: 2px solid rgba(175,175,175,5);
				border-left: 2px solid rgba(175,175,175,5);
				border-bottom: 0px solid rgba(175,175,175,5);
				border-radius: 3px;
			}

			#selects li {
				z-index: -1051;
				margin-top: -7px;
				-webkit-border-radius: 4px;
				-moz-border-radius: 4px;
				border-radius: 4px;
			}

			.slider {

				-webkit-border-radius: 4px;
				-moz-border-radius: 4px;
				border-radius: 8px;
				outline: 0;
				-webkit-box-shadow: inset 0 2px 4px rgba(0,0,0,.15), 0 1px 2px rgba(0,0,0,.05);
				-moz-box-shadow: inset 0 2px 4px rgba(0,0,0,.15), 0 1px 2px rgba(0,0,0,.05);
				box-shadow: inset 0 2px 4px rgba(0,0,0,.15), 0 1px 2px rgba(0,0,0,.05);
				background: #F0F0F0;
				height: 16px;
				width: 200px;
			}
			.slider .knubbel {
				border: 1px solid #cccccc;
				border-color: #e6e6e6 #e6e6e6 #bfbfbf;
				-webkit-border-radius: 4px;
				-moz-border-radius: 4px;
				border-radius: 8px;
				outline: 0;
				-webkit-box-shadow: inset 0 2px 4px rgba(0,0,0,.15), 0 1px 2px rgba(0,0,0,.05);
				-moz-box-shadow: inset 0 2px 4px rgba(0,0,0,.15), 0 1px 2px rgba(0,0,0,.05);
				box-shadow: inset 0 2px 4px rgba(0,0,0,.15), 0 1px 2px rgba(0,0,0,.05);
				background: #CCC;
				width: 26px;
				height: 14px;
			}

			#fontSize {
				height: 50px;
				line-height: 50px;
			}

		</style>

	</body>
</html>
